<!DOCTYPE html>
<html lang="uz">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3D Ustma-ust Kublar</title>
    <style>
        /* Sahifadagi keraksiz bo'shliqlarni olib tashlash */
        body {
            margin: 0;
            overflow: hidden; /* Skroll paydo bo'lishining oldini olish */
        }
        /* Canvas elementini butun ekranga yoyish */
        canvas {
            display: block;
        }
    </style>
</head>
<body>

    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
            }
        }
    </script>

    <script type="module">
        import * as THREE from 'three';
        // Sichqoncha bilan aylantirish funksiyasini import qilish
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';

        // 1. Sahna (Scene) yaratish
        // Barcha 3D obyektlar va yorug'liklar shu sahnaga joylashtiriladi
        const scene = new THREE.Scene();
        scene.background = new THREE.Color(0xeeeeee); // Orqa fon rangi

        // 2. Kamera (Camera) yaratish
        // Biz dunyoga qaysi nuqtadan qarashimizni belgilaydi
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.z = 7; // Kamerani kublardan biroz uzoqlashtiramiz
        camera.position.y = 2; // Kamerani biroz yuqoriga ko'taramiz

        // 3. Render qiluvchi (Renderer) yaratish
        // Sahna va kamerani olib, uni ekranda chizib beradi
        const renderer = new THREE.WebGLRenderer();
        renderer.setSize(window.innerWidth, window.innerHeight);
        document.body.appendChild(renderer.domElement);

        // 4. Yorug'lik (Lighting) qo'shish
        // Yorug'liksiz obyektlar ko'rinmaydi
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.6); // Umumiy yumshoq yorug'lik
        scene.add(ambientLight);

        const directionalLight = new THREE.DirectionalLight(0xffffff, 1.0); // Yo'naltirilgan yorug'lik (quyosh kabi)
        directionalLight.position.set(5, 10, 7.5); // Yorug'lik manbai pozitsiyasi
        scene.add(directionalLight);
        
        // 5. Sichqoncha bilan aylantirish (OrbitControls)
        const controls = new OrbitControls(camera, renderer.domElement);
        controls.enableDamping = true; // Silliq aylanish effekti uchun
        controls.dampingFactor = 0.05;

        // 6. Kublarni yaratish

        // Har bir kubning o'lchami
        const kubOlchami = 1.5;

        // Geometriya (kubning shakli)
        const geometry = new THREE.BoxGeometry(kubOlchami, kubOlchami, kubOlchami);

        // Yashil kub (pastdagi)
        const greenMaterial = new THREE.MeshStandardMaterial({ color: 0x00ff00 }); // Yashil rang
        const greenCube = new THREE.Mesh(geometry, greenMaterial);
        greenCube.position.y = (kubOlchami / 2) * -2; // Pastki kub pozitsiyasi
        scene.add(greenCube);

        // Sariq kub (o'rtadagi)
        const yellowMaterial = new THREE.MeshStandardMaterial({ color: 0xffff00 }); // Sariq rang
        const yellowCube = new THREE.Mesh(geometry, yellowMaterial);
        yellowCube.position.y = 0; // O'rtadagi kub pozitsiyasi
        scene.add(yellowCube);

        // Qizil kub (ustidagi)
        const redMaterial = new THREE.MeshStandardMaterial({ color: 0xff0000 }); // Qizil rang
        const redCube = new THREE.Mesh(geometry, redMaterial);
        redCube.position.y = kubOlchami; // Yuqoridagi kub pozitsiyasi
        scene.add(redCube);


        // 7. Animatsiya tsikli (Animation Loop)
        // Bu funksiya har bir kadrda qayta-qayta ishga tushib, sahnani yangilab turadi
        function animate() {
            requestAnimationFrame(animate);

            // Boshqaruvni yangilash (silliq aylanish uchun)
            controls.update();

            // Sahnani render qilish (chizish)
            renderer.render(scene, camera);
        }

        // Animatsiyani ishga tushirish
        animate();

        // Brauzer oynasi o'lchami o'zgarganda kamerani moslashtirish
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

    </script>
</body>
</html>
